// Unified translation system with prefixes for flexible and fixed carpooling
const translations = {
    es: {
        // ===== SHARED =====
        'shared.inicio': 'Inicio',
        'shared.grupos': 'Grupos',
        'shared.ajustes': 'Ajustes',
        'shared.crear_grupo': 'Crear Grupo',
        'shared.unirse_codigo': 'Unirse con CÃ³digo',
        'shared.idioma': 'Idioma',
        'shared.cerrar_sesion': 'Cerrar SesiÃ³n',
        'shared.nombre_usuario': 'Nombre de usuario',
        'shared.volver': 'Volver',
        'shared.cerrar': 'Cerrar',
        'shared.cancelar': 'Cancelar',
        'shared.confirmar': 'Confirmar',
        'shared.crear': 'Crear',
        'shared.salir': 'Salir',
        'shared.mis_grupos': 'Mis Grupos',
        'shared.nuevo_grupo': 'Â¿Nuevo grupo?',
        'shared.tienes_codigo': 'Â¿Tienes un cÃ³digo?',
        'shared.nombre_grupo': 'Nombre del grupo',
        'shared.codigo': 'XXXXXX',
        'shared.no_grupos': 'No tienes grupos todavÃ­a',
        'shared.salir_grupo': 'Salir de un grupo',
        'shared.miembros': 'Miembros',
        'shared.ver_miembros': 'Ver Miembros',
        'shared.no_miembros': 'No hay miembros',
        'shared.refrescar': 'ðŸ”„ Refrescar',
        'shared.toast_invalid_code': 'CÃ³digo no vÃ¡lido',
        'shared.toast_already_in_group': 'Ya perteneces a este grupo',
        'shared.confirm_leave_group': 'Â¿EstÃ¡s seguro de que quieres salir del grupo',
        'shared.toast_left_group': 'Has salido de',
        'shared.toast_name_saved': 'Nombre guardado',

        // ===== GROUP TYPES =====
        'group_type.flexible': 'ðŸ”„ Carpool flexible',
        'group_type.fixed': 'ðŸ“… Carpool fijo',
        'group_type.parking': 'ðŸ…¿ï¸ Plazas parking',
        'group_type.select': 'Tipo de grupo',

        // ===== FLEXIBLE =====
        'flexible.aporto_coche': 'Aporto Coche',
        'flexible.pasajeros': 'Pasajeros',
        'flexible.conductor_real': 'Real',
        'flexible.conductor_sugerido': 'Sugerido',
        'flexible.unirse_viaje': 'Apuntarse',
        'flexible.abandonar_viaje': 'Abandonar',
        'flexible.tipo_ida_vuelta': 'Ida y Vuelta',
        'flexible.tipo_ida': 'Solo Ida',
        'flexible.tipo_vuelta': 'Solo Vuelta',
        'flexible.trayecto': 'Trayecto',
        'flexible.repeticion': 'RepeticiÃ³n',
        'flexible.solo_hoy': 'Solo hoy',
        'flexible.4_semanas': '4 semanas',
        'flexible.12_semanas': '12 semanas',
        'flexible.nuevo_viaje': 'Nuevo Viaje',
        'flexible.quien_condujo': 'Â¿QuiÃ©n condujo?',
        'flexible.no_viajes': 'No hay viajes este dÃ­a',
        'flexible.selecciona_dia': 'Selecciona un dÃ­a',
        'flexible.agregar_viaje': '+ Viaje',
        'flexible.toast_past_days': 'No puedes editar dÃ­as pasados',
        'flexible.toast_is_driver': 'No puedes abandonar si eres el conductor',
        'flexible.toast_calendar_refreshed': 'Calendario actualizado',

        // ===== FIXED =====
        'fixed.estoy_de_baja': 'Estoy de baja',
        'fixed.volver_baja': 'Volver de baja',
        'fixed.orden_conduccion': 'Orden de conducciÃ³n',
        'fixed.deudas': 'Deudas',
        'fixed.crear_deuda': 'Crear Deuda',
        'fixed.ver_deudas': 'Ver Deudas',
        'fixed.tomar_relevo': 'Tomar relevo',
        'fixed.pedir_relevo': 'Pedir relevo',
        'fixed.no_puedo_conducir': 'No puedo conducir',
        'fixed.festivo': 'Festivo',
        'fixed.nadie_va': 'Nadie va',
        'fixed.consecutivos': 'DÃ­as consecutivos',
        'fixed.viaje_puntual': 'Crear viaje puntual',
        'fixed.configurar_rutina': 'Configurar rutina semanal',
        'fixed.eliminar_rutina': 'Eliminar rutina semanal',
        'fixed.dias_viaje': 'DÃ­as de viaje',
        'fixed.confirmar_rutina': 'Confirmar rutina',
        'fixed.unirse_al_viaje': 'Unirse al viaje (Debes 1)',
        'fixed.bajarse_viaje': 'Bajarse del viaje',
        'fixed.eliminar_viaje': 'Eliminar viaje',
        'fixed.canjear_deuda': 'Canjear Deuda',
        'fixed.viajes_pendientes': 'Viajes Pendientes',
        'fixed.acreedor': 'Acreedor',
        'fixed.deudor': 'Deudor',
        'fixed.cantidad': 'Cantidad',
        'fixed.sin_deudas': 'No hay deudas en el grupo',
        'fixed.quien_te_debe': 'Â¿QuiÃ©n te debe?',
        'fixed.gestion_trayecto': 'GestiÃ³n de trayecto',
        'fixed.conductor': 'Conductor',
        'fixed.dia_festivo': 'ðŸŒŸ DÃ­a Festivo (Sin viaje)',
        'fixed.viaje_cancelado': 'âŒ Viaje cancelado (Nadie va)',
        'fixed.buscando_conductor': 'âš ï¸ BUSCANDO CONDUCTOR PARA HOY',
        'fixed.te_toca_conducir': 'ðŸš— Te toca conducir',
        'fixed.conduce': 'Conduce:',
        'fixed.viaje_puntual_de': 'ðŸš— Viaje Puntual de',
        'fixed.dia_sin_planificar': 'DÃ­a sin planificar',
        'fixed.tabla_deudas': 'Tabla de Deudas',
        'fixed.de_baja': '(De baja)',
        'fixed.confirm_baja': 'Â¿Marcar como de baja? No podrÃ¡s conducir, crear ni unirte a viajes.',
        'fixed.confirm_volver_baja': 'Â¿Volver de la baja? VolverÃ¡s a la rotaciÃ³n normal.',
        'fixed.abandonar_grupo': 'Abandonar un grupo',
        'fixed.selecciona_grupo_abandonar': 'Seleccionar grupo a abandonar',
        'fixed.no_perteneces_grupo': 'No perteneces a ningÃºn grupo',
        'fixed.calendario_actualizado': 'Calendario actualizado',
        'fixed.viaje_puntual_creado': 'Viaje puntual creado',
        'fixed.rutina_guardada': 'Â¡Rutina guardada correctamente!',
        'fixed.selecciona_dia': 'Selecciona al menos un dÃ­a',
        'fixed.error_guardar': 'Error al guardar',
        'fixed.confirm_elim_rutina': 'Â¿EstÃ¡s seguro de que quieres eliminar la rutina de',
        'fixed.elim_rutina_desc': 'Esto borrarÃ¡ la asignaciÃ³n automÃ¡tica de conductores para todos los dÃ­as futuros.',
        'fixed.rutina_eliminada': 'Rutina eliminada correctamente',
        'fixed.relevo_solicitado': 'Se ha solicitado un relevo para este dÃ­a',
        'fixed.relevo_tomado': 'Â¡Relevo tomado! Te deben un viaje.',
        'fixed.mando_viaje': 'Ahora tu eres el conductor.',
        'fixed.dia_festivo_marcado': 'DÃ­a festivo marcado',
        'fixed.viaje_cancelado_op': 'Viaje cancelado',
        'fixed.no_modificar_pasadas': 'No puedes modificar fechas pasadas',
        'fixed.viaje_no_encontrado': 'Viaje no encontrado',
        'fixed.sin_permisos': 'No tienes permisos para eliminar este viaje',
        'fixed.error_eliminar': 'Error al eliminar el viaje',
        'fixed.error_union': 'No se pudo procesar la uniÃ³n',
        'fixed.ya_partes_viaje': 'Ya formas parte de este viaje',
        'fixed.unido_viaje': 'Â¡Te has unido! Debes 1 viaje ðŸš—',
        'fixed.bajado_viaje': 'Te has bajado del viaje y se cancelÃ³ tu deuda',
        'fixed.error_bajarse': 'Error al procesar tu solicitud',
        'fixed.viaje_eliminado': 'âœ… Viaje puntual eliminado y deudas canceladas',
        'fixed.confirm_elim_viaje': 'Â¿EstÃ¡s seguro de que quieres eliminar este viaje puntual?',
        'fixed.elim_viaje_desc': 'Se eliminarÃ¡n todas las deudas asociadas.',
        'fixed.confirm_bajarse': 'Â¿Quieres bajarte de este viaje?',
        'fixed.baj_descri': 'Se eliminarÃ¡ tu deuda.',
        'fixed.deuda_canjeada': 'Â¡Deuda canjeada! Hoy conduce',
        'fixed.error_deuda': 'Error al canjear la deuda',
        'fixed.deuda_creada': 'Deuda creada correctamente',
        'fixed.selecciona_miembro': 'Selecciona un miembro',
        'fixed.viajes_pend': 'Viajes pendientes',
        'fixed.baja_marcada': 'Marcado como de baja',
        'fixed.baja_quitada': 'Ya no estÃ¡s de baja',
        'fixed.no_unir_baja': 'No puedes unirte estando de baja',
        'fixed.no_crear_baja': 'No puedes crear viajes estando de baja',
        'fixed.no_canjear_baja': 'Esta persona estÃ¡ de baja',
        'fixed.nombre_actualizado': 'Nombre actualizado',
        'fixed.idioma_changed': 'Idioma cambiado a',
        'fixed.pending_relevo': 'âš ï¸ BUSCANDO CONDUCTOR PARA HOY',

        // ===== PARKING =====
        'parking.title': 'ðŸ…¿ï¸ Plazas parking',
        'parking.mi_rutina': 'Mi Rutina',
        'parking.gestionar_plazas': 'Gestionar Plazas',
        'parking.miembros': 'Miembros',
        'parking.asistencia_pregunta': 'Â¿Voy a aparcar hoy?',
        'parking.detalle_dia': 'AsignaciÃ³n de plazas',
        'parking.rutina_titulo': 'Mi Rutina Semanal',
        'parking.rutina_desc': 'DÃ­as que sueles aparcar',
        'parking.rutina_info': 'Estos dÃ­as se marcarÃ¡n como "asistencia" por defecto. Siempre podrÃ¡s cambiarlo para un dÃ­a concreto.',
        'parking.guardar_rutina': 'Guardar Rutina',
        'parking.toast_rutina_guardada': 'Â¡Rutina guardada correctamente!',
        'parking.miembros_titulo': 'Miembros del Grupo',
        'parking.miembros_desc': 'Lista general de participantes',
        'parking.plaza': 'Plaza',
        'parking.reserva': 'Reserva',
        'parking.tu': '(TÃº)',
        'parking.no_miembros': 'No hay miembros',
        'parking.gestionar_titulo': 'Gestionar Plazas',
        'parking.gestionar_desc': 'AÃ±ade o elimina plazas disponibles',
        'parking.placeholder_plaza': 'Nombre (ej. P1-24)',
        'parking.no_datos': 'No hay datos de parking',
        'parking.reserva_con_slot': 'Reserva ({slot})',
        'parking.desapuntado': 'Desapuntado',
        'parking.tiene_plaza': 'Tiene Plaza',
        'parking.en_reserva': 'En Reserva',
        'parking.no_plazas_creadas': 'No hay plazas creadas',
        'parking.confirm_delete_spot': 'Â¿Eliminar plaza? Esto afectarÃ¡ a la rotaciÃ³n futura.',
        'parking.move_up': 'Subir',
        'parking.move_down': 'Bajar',
        'parking.reorder_success': 'Orden actualizado',
        'parking.lang_code': 'es-ES',

        // Days of week
        'days': ['DO', 'LU', 'MA', 'MI', 'JU', 'VI', 'SA']
    },
    eu: {
        // ===== SHARED =====
        'shared.inicio': 'Hasiera',
        'shared.grupos': 'Taldeak',
        'shared.ajustes': 'Ezarpenak',
        'shared.crear_grupo': 'Taldea sortu',
        'shared.unirse_codigo': 'Kodearekin sartu',
        'shared.idioma': 'Hizkuntza',
        'shared.cerrar_sesion': 'Saioa Itxi',
        'shared.nombre_usuario': 'Erabiltzailearen izena',
        'shared.volver': 'Itzuli',
        'shared.cerrar': 'Itxi',
        'shared.cancelar': 'Utzi',
        'shared.confirmar': 'Baieztatu',
        'shared.crear': 'Sortu',
        'shared.salir': 'Irten',
        'shared.mis_grupos': 'Nire Taldeak',
        'shared.nuevo_grupo': 'Talde berria?',
        'shared.tienes_codigo': 'Kodea daukazu?',
        'shared.nombre_grupo': 'Taldearen izena',
        'shared.codigo': 'XXXXXX',
        'shared.no_grupos': 'Oraindik ez duzu talderik',
        'shared.salir_grupo': 'Talde batetik irten',
        'shared.miembros': 'Kideak',
        'shared.ver_miembros': 'Kideak ikusi',
        'shared.no_miembros': 'Ez dago kiderik',
        'shared.refrescar': 'ðŸ”„ Eguneratu',
        'shared.toast_invalid_code': 'Kode okerra',
        'shared.toast_already_in_group': 'Dagoeneko talde honetako kide zara',
        'shared.confirm_leave_group': 'Ziur zaude taldetik irten nahi duzula?',
        'shared.toast_left_group': 'Taldetik irten zara:',
        'shared.toast_name_saved': 'Izena gordeta',

        // ===== GROUP TYPES =====
        'group_type.flexible': 'ðŸ”„ Malgua',
        'group_type.fixed': 'ðŸ“… Finkoa',
        'group_type.parking': 'ðŸ…¿ï¸ Parking',
        'group_type.select': 'Talde mota',

        // ===== FLEXIBLE =====
        'flexible.aporto_coche': 'Autoa jartzen dut',
        'flexible.pasajeros': 'Bidaiariak',
        'flexible.conductor_real': 'Benetakoa',
        'flexible.conductor_sugerido': 'Iradokitakoa',
        'flexible.unirse_viaje': 'Batu',
        'flexible.abandonar_viaje': 'Utzi',
        'flexible.tipo_ida_vuelta': 'Joan-etorria',
        'flexible.tipo_ida': 'Joan bakarrik',
        'flexible.tipo_vuelta': 'Etorri bakarrik',
        'flexible.trayecto': 'Ibilbidea',
        'flexible.repeticion': 'Errepikapena',
        'flexible.solo_hoy': 'Gaur bakarrik',
        'flexible.4_semanas': '4 aste',
        'flexible.12_semanas': '12 aste',
        'flexible.nuevo_viaje': 'Bidaia berria',
        'flexible.quien_condujo': 'Nork gidatu du?',
        'flexible.no_viajes': 'Ez dago bidaiarik egun honetan',
        'flexible.selecciona_dia': 'Hautatu egun bat',
        'flexible.agregar_viaje': '+ Bidaia',
        'flexible.toast_past_days': 'Ezin dituzu pasatako egunak editatu',
        'flexible.toast_is_driver': 'Ezin duzu bidaia utzi gidaria bazara',
        'flexible.toast_calendar_refreshed': 'Egutegia eguneratuta',

        // ===== FIXED =====
        'fixed.estoy_de_baja': 'Bajan nago',
        'fixed.volver_baja': 'Bajatik itzuli',
        'fixed.orden_conduccion': 'Gidaketa-ordena',
        'fixed.deudas': 'Zorrak',
        'fixed.crear_deuda': 'Zorra sortu',
        'fixed.ver_deudas': 'Zorrak ikusi',
        'fixed.tomar_relevo': 'Txanda hartu',
        'fixed.pedir_relevo': 'Txanda eskatu',
        'fixed.no_puedo_conducir': 'Ezin dut gidatu',
        'fixed.festivo': 'Jai eguna',
        'fixed.nadie_va': 'Inor ez doa',
        'fixed.consecutivos': 'Egun jarraian',
        'fixed.viaje_puntual': 'Aldi baterako bidaia sortu',
        'fixed.configurar_rutina': 'Asteko errutina konfiguratu',
        'fixed.eliminar_rutina': 'Asteko errutina ezabatu',
        'fixed.dias_viaje': 'Bidai egunak',
        'fixed.confirmar_rutina': 'Errutina baieztatu',
        'fixed.unirse_al_viaje': 'Bidaian sartu (1 zor diozu)',
        'fixed.bajarse_viaje': 'Bidaitik irten',
        'fixed.eliminar_viaje': 'Bidaia ezabatu',
        'fixed.canjear_deuda': 'Zorra ordaindu',
        'fixed.viajes_pendientes': 'Zor dituzun bidaiak',
        'fixed.acreedor': 'Hartzekoduna',
        'fixed.deudor': 'Zordun',
        'fixed.cantidad': 'Kopurua',
        'fixed.sin_deudas': 'Ez dago zorrik taldean',
        'fixed.quien_te_debe': 'Nork zor dizu?',
        'fixed.gestion_trayecto': 'Ibilaldiaren kudeaketa',
        'fixed.conductor': 'Gidaria',
        'fixed.pasajeros': 'Bidaiariak',
        'fixed.dia_festivo': 'ðŸŒŸ Jai eguna (Bidairik gabe)',
        'fixed.viaje_cancelado': 'âŒ Bidaia bertan behera geratu da (Inor ez doa)',
        'fixed.buscando_conductor': 'âš ï¸ GIDARI BATEN BILA',
        'fixed.te_toca_conducir': 'ðŸš— Gidatzeko zure txanda da',
        'fixed.conduce': 'Gidaria:',
        'fixed.viaje_puntual_de': 'ðŸš— Aldi baterako bidaia',
        'fixed.dia_sin_planificar': 'Planifikaziorik gabeko eguna',
        'fixed.tabla_deudas': 'Zorren taula',
        'fixed.de_baja': '(Bajan)',
        'fixed.confirm_baja': 'Baja markatu nahi duzu? Ezin izango duzu gidatu, bidairik sortu edo bidai batean sartu.',
        'fixed.confirm_volver_baja': 'Bajatik itzuli nahi duzu? Ohiko errotaziora itzuliko zara.',
        'fixed.abandonar_grupo': 'Talde batetik irten',
        'fixed.selecciona_grupo_abandonar': 'Aukeratu zein taldetik irten nahi duzun',
        'fixed.no_perteneces_grupo': 'Ez duzu talderik',
        'fixed.calendario_actualizado': 'Egutegia eguneratuta',
        'fixed.viaje_puntual_creado': 'Aldi baterako bidaia sortuta',
        'fixed.rutina_guardada': 'Â¡Errutina behar bezala gordeta!',
        'fixed.selecciona_dia': 'Hautatu gutxienez egun bat',
        'fixed.error_guardar': 'Akatsa gordetzerakoan',
        'fixed.confirm_elim_rutina': 'Ziur zaude taldearentzako errutina ezabatu nahi duzula',
        'fixed.elim_rutina_desc': 'Jarduera honek etorkizunean egingo diren esleipenak aldatuko ditu.',
        'fixed.rutina_eliminada': 'Errutina ongi ezabatu da',
        'fixed.relevo_solicitado': 'Egun honetarako ordezkapen bat eskatu da',
        'fixed.relevo_tomado': 'Txanda hartuta! Bidai bat zor dizute.',
        'fixed.mando_viaje': 'Orain zu zara gidaria.',
        'fixed.dia_festivo_marcado': 'Jai eguna markatu da',
        'fixed.viaje_cancelado_op': 'Bidaia bertan behera gelditu da',
        'fixed.no_modificar_pasadas': 'Ezin dituzu aurreko datak aldatu',
        'fixed.viaje_no_encontrado': 'Bidaia ez da aurkitu',
        'fixed.sin_permisos': 'Ez duzu bidaia ezabatzeko baimenik',
        'fixed.error_eliminar': 'Akatsa bidaia ezabatzerakoan',
        'fixed.error_union': 'Akatsa batuera prozesatzean',
        'fixed.ya_partes_viaje': 'Bidai honen parte zara jada',
        'fixed.unido_viaje': 'Â¡Batuta! Bidai bat zor diozu ðŸš—',
        'fixed.bajado_viaje': 'Bidaitik irten zara eta zorra bertan behera geratu da',
        'fixed.error_bajarse': 'Akatsa eskaria prozesatzean',
        'fixed.viaje_eliminado': 'âœ… Aldi baterako bidaia eta zorrak kitatu dira',
        'fixed.confirm_elim_viaje': 'Ziur zaude aldi baterako bidai hau ezabatu nahi duzula?',
        'fixed.elim_viaje_desc': 'Atxikitutako zor guztiak ezabatuko dira.',
        'fixed.confirm_bajarse': 'Bidai honetatik irten nahi duzu?',
        'fixed.baj_descri': 'Zorra ezabatuko da.',
        'fixed.deuda_canjeada': 'Â¡Zorra kitatuta! Gaur honek gidatuko du',
        'fixed.error_deuda': 'Akatsa zorra ordaindzerakoan',
        'fixed.deuda_creada': 'Zorra ongi sortuta',
        'fixed.selecciona_miembro': 'Hautatu kide bat',
        'fixed.viajes_pend': 'Zor dituzun bidaiak',
        'fixed.baja_marcada': 'Bajan markatuta',
        'fixed.baja_quitada': 'Ez zaude bajan',
        'fixed.no_unir_baja': 'Ezin zara bidai batean sartu bajan zaudenean',
        'fixed.no_crear_baja': 'Ezin duzu bidairik sortu bajan zaudenean',
        'fixed.no_canjear_baja': 'Pertsona hau bajan dago',
        'fixed.nombre_actualizado': 'Izena eguneratua',
        'fixed.idioma_changed': 'Hizkuntza aldatuta',
        'fixed.pending_relevo': 'âš ï¸ GIDARI BATEN BILA',

        // ===== PARKING =====
        'parking.title': 'ðŸ…¿ï¸ Aparkaleku plazak',
        'parking.mi_rutina': 'Nire Errutina',
        'parking.gestionar_plazas': 'Plazak Kudeatu',
        'parking.miembros': 'Kideak',
        'parking.asistencia_pregunta': 'Gaur aparkatuko dut?',
        'parking.detalle_dia': 'Plaza esleipena',
        'parking.rutina_titulo': 'Asteko Nire Errutina',
        'parking.rutina_desc': 'Aparkatu ohi duzun egunak',
        'parking.rutina_info': 'Egun hauek "asistentzia" gisa markatuko dira lehenetsi bezala. Beti aldatu ahal izango duzu egun jakin baterako.',
        'parking.guardar_rutina': 'Errutina Gorde',
        'parking.toast_rutina_guardada': 'Errutina ongi gorde da!',
        'parking.miembros_titulo': 'Taldeko Kideak',
        'parking.miembros_desc': 'Parte-hartzaileen zerrenda orokorra',
        'parking.plaza': 'Plaza',
        'parking.reserva': 'Erreserba',
        'parking.tu': '(Zu)',
        'parking.no_miembros': 'Ez dago kiderik',
        'parking.gestionar_titulo': 'Plazak Kudeatu',
        'parking.gestionar_desc': 'Gehitu edo ezabatu erabilgarri dauden plazak',
        'parking.placeholder_plaza': 'Izena (adib. P1-24)',
        'parking.no_datos': 'Ez dago aparkaleku daturik',
        'parking.reserva_con_slot': 'Erreserba ({slot})',
        'parking.desapuntado': 'Desapuntatuta',
        'parking.tiene_plaza': 'Plaza dauka',
        'parking.en_reserva': 'Erreserban',
        'parking.no_plazas_creadas': 'Ez dago plazarik sortuta',
        'parking.confirm_delete_spot': 'Ziur zaude plaza hau ezabatu nahi duzula? Honek etorkizuneko errotazioari eragingo dio.',
        'parking.move_up': 'Igo',
        'parking.move_down': 'Jaitsi',
        'parking.reorder_success': 'Ordena eguneratua',
        'parking.lang_code': 'eu-ES',

        // Days of week
        'days': ['IG', 'AL', 'AS', 'AZ', 'OG', 'OL', 'LA']
    }
};

let currentLang = localStorage.getItem('app-lang') || 'es';

function t(key) {
    return translations[currentLang]?.[key] || key;
}

function setLanguage(lang) {
    currentLang = lang;
    localStorage.setItem('app-lang', lang);
    applyTranslations();
}

function applyTranslations() {
    document.querySelectorAll('[data-i18n]').forEach(el => {
        const key = el.getAttribute('data-i18n');
        const translation = t(key);
        if (el.tagName === 'INPUT' && (el.type === 'text' || el.type === 'email' || el.type === 'password')) {
            if (el.hasAttribute('placeholder')) {
                el.placeholder = translation;
            }
        } else {
            el.innerText = translation;
        }
    });

    // Update active language button
    document.querySelectorAll('[id^="lang-"]').forEach(btn => btn.classList.remove('active'));
    const activeLangBtn = document.getElementById('lang-' + currentLang);
    if (activeLangBtn) activeLangBtn.classList.add('active');
}

// Global expose
window.t = t;
window.setLanguage = setLanguage;
window.applyTranslations = applyTranslations;
window.currentLang = currentLang;
